<script>
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })
</script>
<% @gradeValues = {"1" => 1.0, "-2" => 1.75, "2" => 2.0, "+2" => 2.5, "-3" => 2.75, "3" => 3, "+3" => 3.5,
                   "-4" => 3.75, "4" => 4, "+4" => 4.5, "-5" => 4.75, "5" => 5, "+5" => 5.5, "6" => 6} %>
<div class="container-fluid">
  <div class="container container-radius container-shadow container-padding-small bg-light">
    <h4 class="float-left font-weight-light">Twoje oceny</h4>
    <ul class="container-header float-right">
      <li class="container-header"><h4 class="font-weight-light">Klasa: <kbd><%= @student.group.groupName %></kbd></h4>
      </li>
    </ul>
    <div class="table-responsive">
      <table class="table">
        <thead>
        <tr>
          <th scope="col">Przedmiot</th>
          <th scope="col">Oceny</th>
          <th scope="col">Åšrednia</th>
        </tr>
        </thead>
        <tbody>
        <% Subject.all.each do |s| %>
          <% avg = 0.0 %>
          <% i = 0.0 %>
          <tr>
            <td scope="row"><%= s.subjectName %></td>
            <td>
              <% @student.grades.each do |g| %>
                <% if (s.eql? g.subject) %>
                  <ul class="grade-list">
                    <li class="grade-list"><span data-toggle="tooltip" data-placement="top" title=<%= g.info %>>
                        <%= label_tag 'grade', g.grade, :class => 'badge grade grade-' + g.grade[0] %></span>
                    </li>
                  </ul>
                  <% avg += @gradeValues[g.grade] %>
                  <% i += 1.0 %>
                <% end end %>
            </td>
            <td><span class="badge badge-secondary"><%= (avg / i).round(2) %></span></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>